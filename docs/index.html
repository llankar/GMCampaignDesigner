
<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8' />
  <title>GMCampaignDesigner Documentation</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 24px; color: #111; }
    h1, h2, h3, h4 { color: #0b3d6e; }
    code { background: #f2f4f8; padding: 2px 4px; border-radius: 3px; }
    section { margin-bottom: 36px; }
    figure.shot { margin: 0 0 24px 0; }
    figure.shot img { max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 4px; display: block; }
    figure.shot figcaption { color: #666; font-size: 0.9em; margin-top: 6px; }
    .menu-block { margin-bottom: 16px; }
    ul { margin-top: 8px; }
  </style>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <meta name='generator' content='generate_docs.py'>
  <meta name='robots' content='noindex'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge' />
  <meta name='description' content='Auto-generated documentation for GMCampaignDesigner'>
  <meta name='theme-color' content='#0b3d6e' />
  <meta name='og:title' content='GMCampaignDesigner Documentation' />
  <meta name='og:type' content='website' />
  <meta name='og:description' content='Auto-generated documentation for GMCampaignDesigner' />
  <meta name='og:image' content='images/main_window.png' />
  <meta name='og:image:alt' content='Main Window Screenshot' />
  <meta name='twitter:card' content='summary_large_image' />
  <meta name='twitter:title' content='GMCampaignDesigner Documentation' />
  <meta name='twitter:image' content='images/main_window.png' />
  <meta name='twitter:image:alt' content='Main Window Screenshot' />
  <meta name='apple-mobile-web-app-title' content='GMCampaignDesigner Docs' />
</head>
<body>
  
        <section id="overview">
          <h1>GMCampaignDesigner Documentation</h1>
          <p>This document provides an overview of the application's features, UI, right-click context menus, and a module API reference generated from the source code.</p>
          <p>Version generated on: 2025-09-15 21:39:01</p>
        </section>
        <section id='screenshots'><h2>UI Screenshots</h2><h3>Main Window &amp; Sidebar</h3><figure class='shot'><img src='images/main_window.png' alt='Main Window' /><figcaption>Main Window</figcaption></figure><h3>Entity Managers</h3><figure class='shot'><img src='images/entity_clues.png' alt='Entity Clues' /><figcaption>Entity Clues</figcaption></figure><figure class='shot'><img src='images/entity_creatures.png' alt='Entity Creatures' /><figcaption>Entity Creatures</figcaption></figure><figure class='shot'><img src='images/entity_factions.png' alt='Entity Factions' /><figcaption>Entity Factions</figcaption></figure><figure class='shot'><img src='images/entity_informations.png' alt='Entity Informations' /><figcaption>Entity Informations</figcaption></figure><figure class='shot'><img src='images/entity_maps.png' alt='Entity Maps' /><figcaption>Entity Maps</figcaption></figure><figure class='shot'><img src='images/entity_npcs.png' alt='Entity Npcs' /><figcaption>Entity Npcs</figcaption></figure><figure class='shot'><img src='images/entity_objects.png' alt='Entity Objects' /><figcaption>Entity Objects</figcaption></figure><figure class='shot'><img src='images/entity_pcs.png' alt='Entity Pcs' /><figcaption>Entity Pcs</figcaption></figure><figure class='shot'><img src='images/entity_places.png' alt='Entity Places' /><figcaption>Entity Places</figcaption></figure><figure class='shot'><img src='images/entity_scenarios.png' alt='Entity Scenarios' /><figcaption>Entity Scenarios</figcaption></figure><h3>Detail &amp; Editor Windows</h3><figure class='shot'><img src='images/scenario_detail.png' alt='Scenario Detail' /><figcaption>Scenario Detail</figcaption></figure><figure class='shot'><img src='images/scenario_editor.png' alt='Scenario Editor' /><figcaption>Scenario Editor</figcaption></figure><figure class='shot'><img src='images/custom_fields_editor.png' alt='Custom Fields Editor' /><figcaption>Custom Fields Editor</figcaption></figure><h3>Graph Editors</h3><figure class='shot'><img src='images/npc_graph.png' alt='Npc Graph' /><figcaption>Npc Graph</figcaption></figure><figure class='shot'><img src='images/pc_graph.png' alt='Pc Graph' /><figcaption>Pc Graph</figcaption></figure><figure class='shot'><img src='images/faction_graph.png' alt='Faction Graph' /><figcaption>Faction Graph</figcaption></figure><figure class='shot'><img src='images/scenario_graph.png' alt='Scenario Graph' /><figcaption>Scenario Graph</figcaption></figure><h3>GM &amp; Scenario Tools</h3><figure class='shot'><img src='images/gm_screen.png' alt='Gm Screen' /><figcaption>Gm Screen</figcaption></figure><figure class='shot'><img src='images/scenario_generator.png' alt='Scenario Generator' /><figcaption>Scenario Generator</figcaption></figure><figure class='shot'><img src='images/scenario_importer.png' alt='Scenario Importer' /><figcaption>Scenario Importer</figcaption></figure><h3>Map Tools</h3><figure class='shot'><img src='images/map_tool_selector.png' alt='Map Tool Selector' /><figcaption>Map Tool Selector</figcaption></figure><figure class='shot'><img src='images/map_tool_map1.png' alt='Map Tool Map1' /><figcaption>Map Tool Map1</figcaption></figure><figure class='shot'><img src='images/map_tool_map2.png' alt='Map Tool Map2' /><figcaption>Map Tool Map2</figcaption></figure><figure class='shot'><img src='images/map_tool_rectangle.png' alt='Map Tool Rectangle' /><figcaption>Map Tool Rectangle</figcaption></figure><figure class='shot'><img src='images/map_tool_oval.png' alt='Map Tool Oval' /><figcaption>Map Tool Oval</figcaption></figure></section><section id='context-menus'><h2>Right-Click Menus</h2><div class='menu-block'><h3>modules\factions\faction_graph_editor.py</h3><ul><li>Delete Faction</li></ul></div>
<div class='menu-block'><h3>modules\generic\generic_list_view.py</h3><ul><li>Open in GM Screen</li><li>Display on Second Screen</li><li>Show Portrait</li><li>Copy</li><li>Paste</li><li>Delete</li><li>Clear Color</li><li>Columns...</li><li>Display Fields...</li><li>Row Color</li></ul></div>
<div class='menu-block'><h3>modules\maps\controllers\display_map_controller.py</h3><ul><li>Edit Shape Graphically</li><li>Edit Color</li><li>Edit Dimensions (Numeric)</li><li>Toggle Fill</li><li>Copy Shape</li><li>Delete Shape</li><li>Bring to Front</li><li>Send to Back</li><li>Resize Token</li><li>Change Border Color</li><li>Copy Token</li><li>Delete Token</li><li>Show Portrait</li></ul></div>
<div class='menu-block'><h3>modules\npcs\npc_graph_editor.py</h3><ul><li>No Arrows</li><li>Arrow at Start</li><li>Arrow at End</li><li>Arrows at Both Ends</li><li>Delete Node</li><li>Change Color</li><li>Display Portrait Window</li><li>Change shape size</li><li>Bring to Front</li><li>Send to Back</li><li>Delete Shape</li><li>Arrow Mode</li></ul></div>
<div class='menu-block'><h3>modules\pcs\pc_graph_editor.py</h3><ul><li>No Arrows</li><li>Arrow at Start</li><li>Arrow at End</li><li>Arrows at Both Ends</li><li>Delete Node</li><li>Change Color</li><li>Display Portrait Window</li><li>Change shape size</li><li>Bring to Front</li><li>Send to Back</li><li>Delete Shape</li><li>Arrow Mode</li></ul></div>
<div class='menu-block'><h3>modules\scenarios\scenario_graph_editor.py</h3><ul><li>Delete Node</li><li>Change Color</li><li>Display Portrait</li></ul></div>
<div class='menu-block'><h3>modules\web\templates\clues.html</h3><ul><li>Edit Clue</li><li>Add Link</li><li>Delete Clue</li></ul></div>
<div class='menu-block'><h3>modules\web\templates\clues.html</h3><ul><li>Delete Link</li></ul></div></section><section id='api'><h2>Module API Reference</h2><section class='module'><h3>campaign_generator.py</h3><p>campaign_generator_ui.py
------------------------

This module provides a simple graphical interface for generating
role‑playing game campaigns based on different settings: Fantasy,
Science‑Fiction, Modern and Post‑Apocalyptic.  The UI is built using
Tkinter with ttk widgets for a clean look.  Users select a setting,
generate a random campaign using the corresponding generator module,
view the results, and export the details to a Word (.docx) document.

The program falls back on a minimal DOCX implementation to avoid
requiring external libraries.  It creates a valid Word document by
zipping together the necessary XML parts whenever the user chooses to
export.

To run the application: ``python3 campaign_generator_ui.py``.  A window
will open allowing you to select the setting and generate a campaign.</p><h4>Functions</h4><ul><li><code>roll(table: List[str])</code> &ndash; Return a random entry from a table. Parameters: table (type List[str]). Returns: str.</li><li><code>generate_fantasy_campaign()</code> &ndash; Generate a random fantasy campaign outline using detailed paragraphs.

Each entry is constructed by rolling multiple times on various tables to
produce a longer, multi‑sentence description.  Seeds from the
FlexTale tables are occasionally used as the first component to retain
authenticity, but additional random rolls flesh out the context,
motives, hazards and rewards.  This approach satisfies the request
for longer entries while still ensuring hundreds of unique
combinations per category. Returns: Dict[str, str].</li><li><code>generate_scifi_campaign()</code> &ndash; Generate a random science‑fiction campaign with detailed paragraphs.

Like the fantasy generator, this function uses multi‑roll
compositions to create rich descriptions for each campaign element.
The variety of table entries combined with additional context and
hazards ensures a large pool of possible outputs. Returns: Dict[str, str].</li><li><code>generate_modern_campaign()</code> &ndash; Generate a random modern campaign with detailed descriptions.

Uses the same composition functions as other settings to provide
extended narrative elements and ensure depth for each field.  This
satisfies the requirement for longer entries built from multiple
rolls. Returns: Dict[str, str].</li><li><code>generate_postapoc_campaign()</code> &ndash; Generate a random post‑apocalyptic campaign with richly detailed entries.

Leverages the same multi‑roll composition functions to craft
descriptive paragraphs, blending seeds from the source tables with
additional context and flavour unique to the wasteland. Returns: Dict[str, str].</li><li><code>generate_starting_location(setting: str)</code> &ndash; Generate a starting location string for the given setting. Parameters: setting (type str). Returns: str.</li><li><code>compose_detailed_starting(setting: str)</code> &ndash; Compose a longer starting location description using multiple random rolls.

This function stitches together several generated fragments to build a
multi‑sentence paragraph.  It begins with a seed or constructed
starting location, mentions at least one nearby region, introduces
two NPCs or hazards, and hints at an emerging rumour or quest item. Parameters: setting (type str). Returns: str.</li><li><code>compose_detailed_quest(setting: str)</code> &ndash; Compose a longer quest description by combining multiple quests and hooks.

A primary quest is joined by two side objectives, and multiple
motivations are referenced to weave a complex storyline.  This
ensures that the adventure feels layered and detailed. Parameters: setting (type str). Returns: str.</li><li><code>compose_detailed_hook(setting: str)</code> &ndash; Compose a longer quest hook by combining multiple reasons and contexts.

This merges several hooks into a single narrative, offering
overlapping incentives or pressures that drive the party towards
action. Parameters: setting (type str). Returns: str.</li><li><code>compose_detailed_giver(setting: str)</code> &ndash; Compose a longer quest giver description.

The quest giver is fleshed out by introducing additional allies or
rivals and by foreshadowing both the rewards and the consequences
associated with the mission.  A final hook ties their motives to
the overarching plot. Parameters: setting (type str). Returns: str.</li><li><code>compose_detailed_npc(setting: str)</code> &ndash; Compose a longer NPC description with secrets or motives.

Two NPCs are described in detail, with hidden identities, alliances
and secret motivations.  Additional hooks hint at why they are
connected to the heroes. Parameters: setting (type str). Returns: str.</li><li><code>compose_detailed_region(setting: str)</code> &ndash; Compose a longer region description including hazards.

This function describes multiple adjacent regions, their unique
qualities and hazards, and sometimes hints at secrets or rewards
buried within. Parameters: setting (type str). Returns: str.</li><li><code>compose_detailed_distance(setting: str)</code> &ndash; Compose a longer travel distance with obstacles.

Describes the primary journey and a secondary leg of travel while
mentioning terrain and potential hazards.  This builds a sense of
the arduousness of the trip. Parameters: setting (type str). Returns: str.</li><li><code>compose_detailed_encounter(setting: str)</code> &ndash; Compose a longer encounter description combining multiple hazards.

Two or more random encounters are chained together to create a
challenging and varied sequence of events. Parameters: setting (type str). Returns: str.</li><li><code>compose_detailed_reward(setting: str)</code> &ndash; Compose a longer reward description combining tangible and intangible prizes.

A trio of rewards is described, including a special quest item and
hints of bonus advantages such as knowledge or favours. Parameters: setting (type str). Returns: str.</li><li><code>compose_detailed_penalty(setting: str)</code> &ndash; Compose a longer penalty description combining multiple negative outcomes.

Multiple penalties are chained together, with additional hazards and
hooks hinting at the reasons for the failures.  This makes the
consequences feel weighty and narrative. Parameters: setting (type str). Returns: str.</li><li><code>compose_detailed_item(setting: str)</code> &ndash; Compose a longer quest item description combining different properties.

Multiple unique items are described together, along with hints of
rewards and penalties associated with their possession.  This
encourages the party to weigh the risks and benefits. Parameters: setting (type str). Returns: str.</li><li><code>generate_quest_template(setting: str)</code> &ndash; Generate a quest template string. Parameters: setting (type str). Returns: str.</li><li><code>generate_quest_hook(setting: str)</code> &ndash; Generate a quest hook string. Parameters: setting (type str). Returns: str.</li><li><code>generate_quest_giver(setting: str)</code> &ndash; Generate a quest giver description. Parameters: setting (type str). Returns: str.</li><li><code>generate_npc(setting: str)</code> &ndash; Generate a key NPC description. Parameters: setting (type str). Returns: str.</li><li><code>generate_region(setting: str)</code> &ndash; Generate a region description. Parameters: setting (type str). Returns: str.</li><li><code>generate_distance(setting: str)</code> &ndash; Generate a travel distance string. Parameters: setting (type str). Returns: str.</li><li><code>generate_random_encounter(setting: str)</code> &ndash; Generate a random encounter description. Parameters: setting (type str). Returns: str.</li><li><code>generate_reward(setting: str)</code> &ndash; Generate a reward description. Parameters: setting (type str). Returns: str.</li><li><code>generate_penalty(setting: str)</code> &ndash; Generate a penalty description. Parameters: setting (type str). Returns: str.</li><li><code>generate_quest_item(setting: str)</code> &ndash; Generate a quest item description. Parameters: setting (type str). Returns: str.</li><li><code>export_to_docx(campaign: Dict[str, str], filename: str)</code> &ndash; Create a DOCX file containing the campaign information with styled headings and text. Parameters: campaign (type Dict[str, str]); filename (type str). Returns: None.</li><li><code>main()</code> &ndash; Returns: None.</li></ul><div class='class'><h4>class CampaignGeneratorApp (tk.Tk)</h4><p>Main application window for generating campaigns.</p><ul><li><code>__init__(self)</code> &ndash; Returns: None.</li><li><code>_create_widgets(self)</code> &ndash; Returns: None.</li><li><code>generate_campaign(self)</code> &ndash; Generate and display a campaign for the selected setting. Returns: None.</li><li><code>export_campaign(self)</code> &ndash; Returns: None.</li><li><code>export_campaign_json(self)</code> &ndash; Export the current campaign to a JSON file using the provided template.

The generated scenario is converted into a dictionary with fields
Title, Summary, Secrets, Places and NPCs.  Summary and Secrets are
stored as objects containing text and empty formatting lists to
mirror the example template.  If the chosen file already exists
and contains a JSON list, the scenario will be appended; otherwise
a new list is created. Returns: None.</li></ul></div></section>
<section class='module'><h3>main_window.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class MainWindow (ctk.CTk)</h4><p></p><ul><li><code>__init__(self)</code> &ndash; No inline documentation available.</li><li><code>open_ai_settings(self)</code> &ndash; No inline documentation available.</li><li><code>set_window_icon(self)</code> &ndash; No inline documentation available.</li><li><code>create_layout(self)</code> &ndash; No inline documentation available.</li><li><code>load_icons(self)</code> &ndash; No inline documentation available.</li><li><code>open_custom_fields_editor(self)</code> &ndash; No inline documentation available.</li><li><code>load_icon(self, file_name, size=(60, 60))</code> &ndash; Parameters: file_name; size (default (60, 60)).</li><li><code>create_sidebar(self)</code> &ndash; No inline documentation available.</li><li><code>create_accordion_sidebar(self)</code> &ndash; No inline documentation available.</li><li><code>create_content_area(self)</code> &ndash; No inline documentation available.</li><li><code>_toggle_banner(self)</code> &ndash; No inline documentation available.</li><li><code>get_content_container(self)</code> &ndash; Choose correct parent depending on banner state.</li><li><code>create_exit_button(self)</code> &ndash; No inline documentation available.</li><li><code>load_model_config(self)</code> &ndash; No inline documentation available.</li><li><code>init_wrappers(self)</code> &ndash; No inline documentation available.</li><li><code>open_faction_graph_editor(self)</code> &ndash; No inline documentation available.</li><li><code>clear_current_content(self)</code> &ndash; No inline documentation available.</li><li><code>move_current_view(self)</code> &ndash; Move the current open view to the correct container based on banner state.</li><li><code>open_entity(self, entity)</code> &ndash; Parameters: entity.</li><li><code>save_items_to_json(self, view, entity_name)</code> &ndash; Parameters: view; entity_name.</li><li><code>load_items_from_json(self, view, entity_name)</code> &ndash; Parameters: view; entity_name.</li><li><code>open_gm_screen(self)</code> &ndash; No inline documentation available.</li><li><code>open_npc_graph_editor(self)</code> &ndash; No inline documentation available.</li><li><code>open_pc_graph_editor(self)</code> &ndash; No inline documentation available.</li><li><code>open_scenario_graph_editor(self)</code> &ndash; No inline documentation available.</li><li><code>export_foundry(self)</code> &ndash; No inline documentation available.</li><li><code>open_scenario_importer(self)</code> &ndash; No inline documentation available.</li><li><code>open_scenario_generator(self)</code> &ndash; No inline documentation available.</li><li><code>change_database_storage(self)</code> &ndash; No inline documentation available.</li><li><code>select_swarmui_path(self)</code> &ndash; No inline documentation available.</li><li><code>launch_swarmui(self)</code> &ndash; No inline documentation available.</li><li><code>cleanup_swarmui(self)</code> &ndash; No inline documentation available.</li><li><code>generate_missing_portraits(self)</code> &ndash; No inline documentation available.</li><li><code>generate_missing_npc_portraits(self)</code> &ndash; No inline documentation available.</li><li><code>generate_portraits_continue_npcs(self)</code> &ndash; No inline documentation available.</li><li><code>generate_missing_creature_portraits(self)</code> &ndash; No inline documentation available.</li><li><code>generate_portraits_continue_creatures(self)</code> &ndash; No inline documentation available.</li><li><code>generate_portrait_for_npc(self, npc)</code> &ndash; Parameters: npc.</li><li><code>generate_portrait_for_creature(self, creature)</code> &ndash; Parameters: creature.</li><li><code>copy_and_resize_portrait(self, entity, src_path)</code> &ndash; Parameters: entity; src_path.</li><li><code>preview_and_export_scenarios(self)</code> &ndash; No inline documentation available.</li><li><code>preview_and_save(self, selected_scenarios)</code> &ndash; Parameters: selected_scenarios.</li><li><code>apply_formatting(self, run, formatting)</code> &ndash; Parameters: run; formatting.</li><li><code>normalize_name(self, name)</code> &ndash; Parameters: name.</li><li><code>build_portrait_mapping(self)</code> &ndash; No inline documentation available.</li><li><code>associate_npc_portraits(self)</code> &ndash; No inline documentation available.</li><li><code>_on_ctrl_f(self, event=None)</code> &ndash; Global Ctrl+F binding: only opens search when GM screen is active. Parameters: event (default None).</li><li><code>map_tool(self)</code> &ndash; No inline documentation available.</li></ul></div></section>
<section class='module'><h3>modules\ai\authoring_wizard.py</h3><p></p><h4>Functions</h4><ul><li><code>_parse_json_relaxed(s: str)</code> &ndash; Parameters: s (type str).</li></ul><div class='class'><h4>class AuthoringWizardView (ctk.CTkFrame)</h4><p>AI-assisted authoring for NPCs and Scenarios with presets and checks.</p><ul><li><code>__init__(self, parent)</code> &ndash; Parameters: parent.</li><li><code>_build_layout(self)</code> &ndash; No inline documentation available.</li><li><code>select_for(self, entity_type: str)</code> &ndash; Select default tab based on entity type (e.g., 'npcs' or 'scenarios'). Parameters: entity_type (type str).</li><li><code>_build_tab_npc(self, tab)</code> &ndash; Parameters: tab.</li><li><code>_build_tab_scenario(self, tab)</code> &ndash; Parameters: tab.</li><li><code>_build_tab_beats(self, tab)</code> &ndash; Parameters: tab.</li><li><code>_lore_digest(self, max_chars: int=2000)</code> &ndash; Parameters: max_chars (type int, default 2000). Returns: str.</li><li><code>_short(val, n=120)</code> &ndash; Parameters: val; n (default 120).</li><li><code>_system_hdr(self)</code> &ndash; No inline documentation available.</li><li><code>_with_lore(self, prompt: str)</code> &ndash; Parameters: prompt (type str). Returns: str.</li><li><code>_chat_json(self, user_prompt: str)</code> &ndash; Parameters: user_prompt (type str). Returns: dict.</li><li><code>_chat_text(self, user_prompt: str)</code> &ndash; Parameters: user_prompt (type str). Returns: str.</li><li><code>_format_kv(self, key, value)</code> &ndash; Parameters: key; value.</li><li><code>_format_list(self, title, items)</code> &ndash; Parameters: title; items.</li><li><code>_format_npc_text(self, data: dict)</code> &ndash; Parameters: data (type dict). Returns: str.</li><li><code>_format_scenario_text(self, data: dict)</code> &ndash; Parameters: data (type dict). Returns: str.</li><li><code>_as_text(val)</code> &ndash; Coerce arbitrary value to displayable text. Parameters: val.</li><li><code>generate_npc(self)</code> &ndash; No inline documentation available.</li><li><code>check_npc_consistency(self)</code> &ndash; No inline documentation available.</li><li><code>save_npc(self)</code> &ndash; No inline documentation available.</li><li><code>generate_scenario(self)</code> &ndash; No inline documentation available.</li><li><code>check_scenario_consistency(self)</code> &ndash; No inline documentation available.</li><li><code>save_scenario(self)</code> &ndash; No inline documentation available.</li><li><code>expand_beat(self)</code> &ndash; No inline documentation available.</li></ul></div></section>
<section class='module'><h3>modules\ai\local_ai_client.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class LocalAIClient</h4><p>Minimal OpenAI-compatible chat client for local models (e.g., gpt-oss,
LM Studio, Ollama OpenAI adapter, text-gen webui proxy).

Reads configuration from [AI] in config/config.ini:
  - base_url: server base (e.g., http://localhost:8080)
  - api_key: optional token if your server requires it
  - model:   model name/id to request
  - temperature: default generation temperature (float)
  - max_tokens:  optional default max tokens (int)
  - use_powershell: if true on Windows, call via PowerShell
                    Invoke-WebRequest (default true on Windows)</p><ul><li><code>__init__(self)</code> &ndash; No inline documentation available.</li><li><code>_parse_json_safe(s: str)</code> &ndash; Parse JSON from a string that may contain extra leading/trailing text.

Returns the first JSON object/array found. Parameters: s (type str).</li><li><code>_powershell_generate(self, url, payload, headers)</code> &ndash; POST to url using PowerShell Invoke-WebRequest.

Returns parsed JSON dict. Parameters: url; payload; headers.</li><li><code>chat(self, messages, model=None, temperature=None, max_tokens=None, timeout=600)</code> &ndash; Send a chat completion request and return the assistant's text.

messages: list[{role, content}] per OpenAI API Parameters: messages; model (default None); temperature (default None); max_tokens (default None); timeout (default 600).</li></ul></div></section>
<section class='module'><h3>modules\clues\clues_model.py</h3><p></p><h4>Functions</h4><ul><li><code>load()</code> &ndash; No inline documentation available.</li><li><code>save(items)</code> &ndash; Parameters: items.</li></ul></section>
<section class='module'><h3>modules\creatures\creatures_model.py</h3><p></p><h4>Functions</h4><ul><li><code>load()</code> &ndash; No inline documentation available.</li><li><code>save(items)</code> &ndash; Parameters: items.</li></ul></section>
<section class='module'><h3>modules\creatures\creatures_opener.py</h3><p></p><h4>Functions</h4><ul><li><code>open_creature_editor_window(creature_name)</code> &ndash; Opens the specified NPC in a new GenericEditorWindow,
completely detached from the scenario/tabs system. Parameters: creature_name.</li></ul></section>
<section class='module'><h3>modules\factions\faction_graph_editor.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class FactionGraphEditor (ctk.CTkFrame)</h4><p></p><ul><li><code>__init__(self, master, faction_wrapper: GenericModelWrapper, *args, **kwargs)</code> &ndash; Parameters: master; faction_wrapper (type GenericModelWrapper); args (variadic positional); kwargs (variadic keyword).</li><li><code>init_toolbar(self)</code> &ndash; No inline documentation available.</li><li><code>add_faction(self)</code> &ndash; No inline documentation available.</li><li><code>_on_faction_chosen(self, name, dialog)</code> &ndash; Parameters: name; dialog.</li><li><code>place_node(self, evt)</code> &ndash; Parameters: evt.</li><li><code>start_link(self)</code> &ndash; No inline documentation available.</li><li><code>_pick_link_start(self, evt)</code> &ndash; Parameters: evt.</li><li><code>_pick_link_end(self, evt)</code> &ndash; Parameters: evt.</li><li><code>draw_graph(self)</code> &ndash; No inline documentation available.</li><li><code>start_drag(self, evt)</code> &ndash; Parameters: evt.</li><li><code>do_drag(self, evt)</code> &ndash; Parameters: evt.</li><li><code>end_drag(self, evt)</code> &ndash; Parameters: evt.</li><li><code>on_right_click(self, evt)</code> &ndash; Parameters: evt.</li><li><code>_delete_node(self, tag)</code> &ndash; Parameters: tag.</li><li><code>get_state(self)</code> &ndash; No inline documentation available.</li><li><code>set_state(self, state)</code> &ndash; Parameters: state.</li><li><code>save_graph(self)</code> &ndash; No inline documentation available.</li><li><code>load_graph(self)</code> &ndash; No inline documentation available.</li></ul></div></section>
<section class='module'><h3>modules\factions\factions_model.py</h3><p></p><h4>Functions</h4><ul><li><code>load()</code> &ndash; No inline documentation available.</li><li><code>save(items)</code> &ndash; Parameters: items.</li></ul></section>
<section class='module'><h3>modules\generic\custom_fields_editor.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class CustomFieldsEditor (ctk.CTkToplevel)</h4><p>UI to manage user-defined custom fields per entity.

- Shows base (built-in) fields as read-only for the selected entity
- Lets users add/remove custom fields (name + type, optional linked_type)
- Persists to config/custom_fields.json</p><ul><li><code>__init__(self, master)</code> &ndash; Parameters: master.</li><li><code>_on_close(self)</code> &ndash; No inline documentation available.</li><li><code>_on_entity_change(self, entity: str)</code> &ndash; Parameters: entity (type str).</li><li><code>_refresh_custom_list(self)</code> &ndash; No inline documentation available.</li><li><code>_on_type_change(self, *_)</code> &ndash; Parameters: _ (variadic positional).</li><li><code>_add_or_update(self)</code> &ndash; No inline documentation available.</li><li><code>_remove_selected(self)</code> &ndash; No inline documentation available.</li><li><code>_on_select_custom(self, _evt=None)</code> &ndash; Parameters: _evt (default None).</li><li><code>_save_current(self)</code> &ndash; No inline documentation available.</li></ul></div></section>
<section class='module'><h3>modules\generic\entity_detail_factory.py</h3><p></p><h4>Functions</h4><ul><li><code>insert_text(parent, header, content)</code> &ndash; Parameters: parent; header; content.</li><li><code>insert_longtext(parent, header, content)</code> &ndash; Parameters: parent; header; content.</li><li><code>insert_links(parent, header, items, linked_type, open_entity_callback)</code> &ndash; Parameters: parent; header; items; linked_type; open_entity_callback.</li><li><code>open_entity_tab(entity_type, name, master)</code> &ndash; Opens (or focuses) a detail window for the given entity_type/name.
Debug prints added to trace why/when new windows are created. Parameters: entity_type; name; master.</li><li><code>unwrap_value(val)</code> &ndash; If val is a dict with a 'text' key, return that.
Otherwise, return str(val) (or '' if None). Parameters: val.</li><li><code>insert_npc_table(parent, header, npc_names, open_entity_callback)</code> &ndash; Parameters: parent; header; npc_names; open_entity_callback.</li><li><code>insert_creature_table(parent, header, creature_names, open_entity_callback)</code> &ndash; Parameters: parent; header; creature_names; open_entity_callback.</li><li><code>insert_places_table(parent, header, place_names, open_entity_callback)</code> &ndash; Render a table of Places (excluding PlayerDisplay) with columns:
Portrait, Name, Description, NPCs, Secrets Parameters: parent; header; place_names; open_entity_callback.</li><li><code>insert_list_longtext(parent, header, items)</code> &ndash; Insert a header + several collapsed CTkLabels, each wrapping to the parent width. Parameters: parent; header; items.</li><li><code>create_scenario_detail_frame(entity_type, scenario_item, master, open_entity_callback=None)</code> &ndash; Build a scrollable detail view for a scenario with:
1) A header zone (Title, Summary, Secrets)
2) Then the rest of the fields, but NPCs always before Places. Parameters: entity_type; scenario_item; master; open_entity_callback (default None).</li><li><code>EditWindow(self, item, template, model_wrapper, creation_mode=False, on_save=None)</code> &ndash; Parameters: item; template; model_wrapper; creation_mode (default False); on_save (default None).</li><li><code>create_entity_detail_frame(entity_type, entity, master, open_entity_callback=None)</code> &ndash; Routes Scenarios through our custom header/body and
everything else through the generic detail path. Parameters: entity_type; entity; master; open_entity_callback (default None).</li><li><code>open_entity_window(entity_type, name)</code> &ndash; Parameters: entity_type; name.</li></ul></section>
<section class='module'><h3>modules\generic\entity_opener.py</h3><p></p><h4>Functions</h4><ul><li><code>open_detached_npc(npc_name)</code> &ndash; Opens the specified NPC in a brand-new Toplevel window
using a minimal GMScreenView to show the NPC data
(but not as a tab). Parameters: npc_name.</li><li><code>open_detached_pc(pc_name)</code> &ndash; Opens the specified NPC in a brand-new Toplevel window
using a minimal GMScreenView to show the NPC data
(but not as a tab). Parameters: pc_name.</li></ul></section>
<section class='module'><h3>modules\generic\entity_selection_dialog.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class EntitySelectionDialog (ctk.CTkToplevel)</h4><p></p><ul><li><code>__init__(self, master, entity_type, model_wrapper, template, on_entity_selected)</code> &ndash; Parameters: master; entity_type; model_wrapper; template; on_entity_selected.</li><li><code>create_table_header(self)</code> &ndash; No inline documentation available.</li><li><code>refresh_list(self)</code> &ndash; No inline documentation available.</li><li><code>create_item_row(self, item, row_index)</code> &ndash; Parameters: item; row_index.</li><li><code>filter_items(self)</code> &ndash; No inline documentation available.</li><li><code>sort_column(self, column)</code> &ndash; Parameters: column.</li><li><code>select_entity(self, item)</code> &ndash; Parameters: item.</li><li><code>open_selected(self)</code> &ndash; No inline documentation available.</li></ul></div></section>
<section class='module'><h3>modules\generic\export_for_foundry.py</h3><p></p><h4>Functions</h4><ul><li><code>preview_and_export_foundry(self)</code> &ndash; Exports scenarios, NPCs, and places into a ZIP archive that contains a JSON file formatted
for Foundry VTT import and a portraits folder with all the portrait image files.

Each scenario becomes a scene with embedded title, summary, secrets, NPC tokens (with preset positions and color-coded faction borders),
and clickable markers for linked place scenes. Separate place scenes are also exported.

The portrait fields in the export JSON are set to relative paths like "portraits/filename.png".</li></ul></section>
<section class='module'><h3>modules\generic\generic_editor_window.py</h3><p></p><h4>Functions</h4><ul><li><code>load_entities_list(entity_type)</code> &ndash; Creates a model wrapper for the given entity type, fetches all
database records, and returns a list of names.

Args:
    entity_type (str): The type of entity to load (e.g., "npcs", "factions").

Returns:
    list: A list of names for the given entity, or an empty list on error. Parameters: entity_type.</li><li><code>load_factions_list()</code> &ndash; No inline documentation available.</li><li><code>load_npcs_list()</code> &ndash; No inline documentation available.</li><li><code>load_pcs_list()</code> &ndash; No inline documentation available.</li><li><code>load_places_list()</code> &ndash; No inline documentation available.</li><li><code>load_objects_list()</code> &ndash; No inline documentation available.</li><li><code>load_creatures_list()</code> &ndash; No inline documentation available.</li></ul><div class='class'><h4>class CustomDropdown (ctk.CTkToplevel)</h4><p></p><ul><li><code>__init__(self, master, options, command, width=None, max_height=300, **kwargs)</code> &ndash; master      – parent widget (usually the root or your main window)
options     – list of strings
command     – callback(value) when the user selects
width       – desired pixel width (defaults to master widget’s width)
max_height  – maximum pixel height Parameters: master; options; command; width (default None); max_height (default 300); kwargs (variadic keyword).</li><li><code>_populate_options(self)</code> &ndash; No inline documentation available.</li><li><code>_on_search_change(self, *args)</code> &ndash; Parameters: args (variadic positional).</li><li><code>_on_activate(self, event)</code> &ndash; Parameters: event.</li><li><code>_on_mousewheel(self, event)</code> &ndash; Parameters: event.</li><li><code>_on_focus_out(self, event)</code> &ndash; Parameters: event.</li></ul></div><div class='class'><h4>class GenericEditorWindow (ctk.CTkToplevel)</h4><p></p><ul><li><code>__init__(self, master, item, template, model_wrapper, creation_mode=False)</code> &ndash; Parameters: master; item; template; model_wrapper; creation_mode (default False).</li><li><code>_get_ai(self)</code> &ndash; No inline documentation available.</li><li><code>_make_richtext_editor(self, parent, initial_text, hide_toolbar=True)</code> &ndash; Shared initialization for any RichTextEditor-based field.
Returns the editor instance. Parameters: parent; initial_text; hide_toolbar (default True).</li><li><code>create_longtext_field(self, field)</code> &ndash; Parameters: field.</li><li><code>create_dynamic_longtext_list(self, field)</code> &ndash; Parameters: field.</li><li><code>create_file_field(self, field)</code> &ndash; Parameters: field.</li><li><code>select_attachment(self)</code> &ndash; No inline documentation available.</li><li><code>create_boolean_field(self, field)</code> &ndash; Parameters: field.</li><li><code>generate_secret_text(self)</code> &ndash; Reads three text files from the assets folder:
- Secret truths.txt
- Secret origins.txt
- Secret consequences.txt
Each file is expected to contain approximately 100 elements (one per line).
The function randomly selects one line from each file in the order:
Secret truths, then Secret origins, then Secret consequences.
The final string is then inserted into the 'Secrets' text widget.</li><li><code>generate_npc(self)</code> &ndash; Generates random NPC data by:
- Filling the Appearance, Background, Personality, and Quirks fields using the corresponding asset files:
    npc_appearance.txt, npc_background.txt, npc_personality.txt, npc_quirks.txt
- Filling the NPC's Secret field by reading from:
    npc_secret_implication.txt, npc_secret_motive.txt, npc_secret_origin.txt, npc_secret_detail.txt
Updates both the underlying data model (self.item) and the UI widgets.</li><li><code>generate_scenario(self)</code> &ndash; No inline documentation available.</li><li><code>generate_scenario_description(self)</code> &ndash; Reads four text files from the assets folder:
- Inciting Incidents.txt
- Antagonists.txt
- Objectives.txt
- Settings.txt
Each file contains ~100 elements (one per line). This function randomly selects one line
from each file and constructs a single-line description in the order:
Inciting Incident, Antagonists, Objectives, Settings.
The output is then inserted into the 'Summary' (scenario description) text widget.</li><li><code>on_combo_mousewheel(self, event, combobox)</code> &ndash; Parameters: event; combobox.</li><li><code>create_dynamic_combobox_list(self, field)</code> &ndash; Parameters: field.</li><li><code>create_text_entry(self, field)</code> &ndash; Parameters: field.</li><li><code>create_action_bar(self)</code> &ndash; No inline documentation available.</li><li><code>save(self)</code> &ndash; No inline documentation available.</li><li><code>create_portrait_field(self, field)</code> &ndash; Parameters: field.</li><li><code>paste_portrait_from_clipboard(self)</code> &ndash; Paste image from clipboard and set as entity portrait.
Supports images directly or image file paths in clipboard (Windows).</li><li><code>create_image_field(self, field)</code> &ndash; Parameters: field.</li><li><code>paste_image_from_clipboard(self)</code> &ndash; Paste image from clipboard and set as entity image (map image).
Supports images directly or image file paths in clipboard (Windows/macOS).</li><li><code>launch_swarmui(self)</code> &ndash; No inline documentation available.</li><li><code>cleanup_swarmui(self)</code> &ndash; Terminate the SwarmUI process if it is running.</li><li><code>create_portrait_with_swarmui(self)</code> &ndash; No inline documentation available.</li><li><code>generate_portrait(self, selected_model)</code> &ndash; Generates a portrait image using the SwarmUI API and associates the resulting
image with the current NPC by updating its 'Portrait' field. Parameters: selected_model.</li><li><code>_show_image_selection_window(self, pil_images)</code> &ndash; Display a modal window with thumbnails side by side for the user to choose.
Returns the selected index, or None if cancelled. Parameters: pil_images.</li><li><code>select_portrait(self)</code> &ndash; No inline documentation available.</li><li><code>select_image(self)</code> &ndash; No inline documentation available.</li><li><code>copy_and_resize_image(self, src_path)</code> &ndash; Parameters: src_path.</li><li><code>copy_and_resize_portrait(self, src_path)</code> &ndash; Parameters: src_path.</li><li><code>_field_text(self, field_name)</code> &ndash; Parameters: field_name.</li><li><code>_set_field_text(self, field_name, text)</code> &ndash; Parameters: field_name; text.</li><li><code>ai_improve_field(self, field_name)</code> &ndash; Parameters: field_name.</li><li><code>ai_draft_field(self, field_name)</code> &ndash; Parameters: field_name.</li><li><code>_infer_theme(self, entity_type: str)</code> &ndash; Infer a coarse genre/theme string from existing entities of given type. Parameters: entity_type (type str). Returns: str.</li><li><code>ai_generate_full_scenario(self)</code> &ndash; No inline documentation available.</li><li><code>ai_generate_full_npc(self)</code> &ndash; No inline documentation available.</li><li><code>ai_generate_full_creature(self)</code> &ndash; No inline documentation available.</li></ul></div></section>
<section class='module'><h3>modules\generic\generic_list_selection_view.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class GenericListSelectionView (ctk.CTkFrame)</h4><p></p><ul><li><code>__init__(self, master, entity_type, model_wrapper, template, on_select_callback=None, *args, **kwargs)</code> &ndash; Parameters: master; entity_type; model_wrapper; template; on_select_callback (default None); args (variadic positional); kwargs (variadic keyword).</li><li><code>refresh_list(self)</code> &ndash; No inline documentation available.</li><li><code>sort_column(self, column_name)</code> &ndash; Parameters: column_name.</li><li><code>filter_items(self)</code> &ndash; No inline documentation available.</li><li><code>on_double_click(self, event)</code> &ndash; Parameters: event.</li><li><code>open_selected(self)</code> &ndash; No inline documentation available.</li><li><code>select_entity(self, item)</code> &ndash; Parameters: item.</li><li><code>sanitize_id(self, s)</code> &ndash; Parameters: s.</li></ul></div></section>
<section class='module'><h3>modules\generic\generic_list_view.py</h3><p></p><h4>Functions</h4><ul><li><code>sanitize_id(s)</code> &ndash; Parameters: s.</li><li><code>unique_iid(tree, base_id)</code> &ndash; Return a unique iid for the given treeview based on base_id. Parameters: tree; base_id.</li></ul><div class='class'><h4>class _ToolTip</h4><p>Simple tooltip for a Treeview showing full cell text on hover.</p><ul><li><code>__init__(self, widget)</code> &ndash; Parameters: widget.</li><li><code>_on_motion(self, event)</code> &ndash; Parameters: event.</li><li><code>_on_leave(self, _)</code> &ndash; Parameters: _.</li><li><code>_show(self, x, y, text)</code> &ndash; Parameters: x; y; text.</li><li><code>_hide(self)</code> &ndash; No inline documentation available.</li></ul></div><div class='class'><h4>class GenericListView (ctk.CTkFrame)</h4><p></p><ul><li><code>__init__(self, master, model_wrapper, template, *args, **kwargs)</code> &ndash; Parameters: master; model_wrapper; template; args (variadic positional); kwargs (variadic keyword).</li><li><code>show_portrait_window(self, iid)</code> &ndash; Parameters: iid.</li><li><code>refresh_list(self)</code> &ndash; No inline documentation available.</li><li><code>on_button_press(self, event)</code> &ndash; Parameters: event.</li><li><code>on_mouse_move(self, event)</code> &ndash; Parameters: event.</li><li><code>on_button_release(self, event)</code> &ndash; Parameters: event.</li><li><code>on_tree_click(self, event)</code> &ndash; Parameters: event.</li><li><code>on_tree_drag(self, event)</code> &ndash; Parameters: event.</li><li><code>on_tree_drop(self, event)</code> &ndash; Parameters: event.</li><li><code>copy_item(self, iid)</code> &ndash; Parameters: iid.</li><li><code>paste_item(self, iid=None)</code> &ndash; Parameters: iid (default None).</li><li><code>insert_next_batch(self)</code> &ndash; No inline documentation available.</li><li><code>insert_grouped_items(self)</code> &ndash; No inline documentation available.</li><li><code>clean_value(self, val)</code> &ndash; Parameters: val.</li><li><code>sort_column(self, column_name)</code> &ndash; Parameters: column_name.</li><li><code>on_double_click(self, event)</code> &ndash; Parameters: event.</li><li><code>on_right_click(self, event)</code> &ndash; Parameters: event.</li><li><code>_show_item_menu(self, iid, event)</code> &ndash; Parameters: iid; event.</li><li><code>display_on_second_screen(self, iid)</code> &ndash; Parameters: iid.</li><li><code>delete_item(self, iid)</code> &ndash; Parameters: iid.</li><li><code>open_in_gm_screen(self, iid)</code> &ndash; Parameters: iid.</li><li><code>add_item(self)</code> &ndash; No inline documentation available.</li><li><code>open_editor(self, item, creation_mode=False)</code> &ndash; Parameters: item; creation_mode (default False).</li><li><code>filter_items(self, query)</code> &ndash; Parameters: query.</li><li><code>add_items(self, items)</code> &ndash; Parameters: items.</li><li><code>import_map_directory(self)</code> &ndash; No inline documentation available.</li><li><code>_copy_map_image(self, src_path, image_name)</code> &ndash; Parameters: src_path; image_name.</li><li><code>choose_group_column(self)</code> &ndash; No inline documentation available.</li><li><code>open_ai_wizard(self)</code> &ndash; Open the AI Authoring Wizard in a modal window, scoped to this entity list.</li><li><code>_find_item_by_iid(self, iid)</code> &ndash; Parameters: iid.</li><li><code>_get_base_id(self, item)</code> &ndash; Parameters: item.</li><li><code>_column_from_ident(self, ident)</code> &ndash; Parameters: ident.</li><li><code>_load_column_settings(self)</code> &ndash; No inline documentation available.</li><li><code>_apply_column_settings(self)</code> &ndash; No inline documentation available.</li><li><code>_save_column_settings(self)</code> &ndash; No inline documentation available.</li><li><code>_show_columns_menu(self, event)</code> &ndash; Parameters: event.</li><li><code>_open_column_chooser(self)</code> &ndash; No inline documentation available.</li><li><code>_open_display_fields_chooser(self)</code> &ndash; No inline documentation available.</li><li><code>_load_list_order(self)</code> &ndash; No inline documentation available.</li><li><code>_save_list_order(self)</code> &ndash; No inline documentation available.</li><li><code>_load_display_fields(self)</code> &ndash; No inline documentation available.</li><li><code>_save_display_fields(self)</code> &ndash; No inline documentation available.</li><li><code>set_row_color(self, iid, color_name)</code> &ndash; Parameters: iid; color_name.</li><li><code>_save_row_color(self, base_id, color_name)</code> &ndash; Parameters: base_id; color_name.</li></ul></div></section>
<section class='module'><h3>modules\generic\generic_model_wrapper.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class GenericModelWrapper</h4><p></p><ul><li><code>__init__(self, entity_type)</code> &ndash; Parameters: entity_type.</li><li><code>load_items(self)</code> &ndash; No inline documentation available.</li><li><code>save_items(self, items)</code> &ndash; Parameters: items.</li></ul></div></section>
<section class='module'><h3>modules\helpers\config_helper.py</h3><p></p><h4>Functions</h4><ul></ul></section>
<section class='module'><h3>modules\helpers\custom_buttons.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class MinimalCTkButton (ctk.CTkButton)</h4><p></p><ul><li><code>__init__(self, master, text="", **kwargs)</code> &ndash; Parameters: master; text (default ""); kwargs (variadic keyword).</li><li><code>_adjust_width(self, text)</code> &ndash; Parameters: text.</li></ul></div></section>
<section class='module'><h3>modules\helpers\rich_text_editor.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class RichTextEditor (ctk.CTkFrame)</h4><p></p><ul><li><code>__init__(self, master, initial_text="")</code> &ndash; Parameters: master; initial_text (default "").</li><li><code>update_text_height(self, event=None)</code> &ndash; Parameters: event (default None).</li><li><code>toggle_bold(self)</code> &ndash; No inline documentation available.</li><li><code>toggle_italic(self)</code> &ndash; No inline documentation available.</li><li><code>toggle_underline(self)</code> &ndash; No inline documentation available.</li><li><code>change_font_size(self)</code> &ndash; No inline documentation available.</li><li><code>change_text_color(self)</code> &ndash; No inline documentation available.</li><li><code>align_left(self)</code> &ndash; No inline documentation available.</li><li><code>align_center(self)</code> &ndash; No inline documentation available.</li><li><code>align_right(self)</code> &ndash; No inline documentation available.</li><li><code>toggle_bullet_list(self)</code> &ndash; No inline documentation available.</li><li><code>toggle_numbered_list(self)</code> &ndash; No inline documentation available.</li><li><code>get_text_data(self)</code> &ndash; Returns a dict with plain text and *integer* formatting ranges.</li><li><code>load_text_data(self, data)</code> &ndash; Loads text and applies formatting from RTF-JSON (with numeric offsets). Parameters: data.</li><li><code>get_text(self)</code> &ndash; For backward compatibility, return plain text.</li><li><code>_index_to_offset(self, index_str)</code> &ndash; Turn a Tk index like "3.14" (line 3, column 14) into a
single integer offset in the full self.text_widget content. Parameters: index_str.</li></ul></div></section>
<section class='module'><h3>modules\helpers\selection_dialog.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class SelectionDialog (ctk.CTkToplevel)</h4><p></p><ul><li><code>__init__(self, master, title, label, options)</code> &ndash; Parameters: master; title; label; options.</li><li><code>on_ok(self)</code> &ndash; No inline documentation available.</li><li><code>on_cancel(self)</code> &ndash; No inline documentation available.</li></ul></div></section>
<section class='module'><h3>modules\helpers\swarmui_helper.py</h3><p></p><h4>Functions</h4><ul><li><code>get_available_models()</code> &ndash; No inline documentation available.</li></ul></section>
<section class='module'><h3>modules\helpers\template_loader.py</h3><p></p><h4>Functions</h4><ul><li><code>_default_template_path(entity_name: str)</code> &ndash; Parameters: entity_name (type str). Returns: str.</li><li><code>_campaign_template_path(entity_name: str)</code> &ndash; Parameters: entity_name (type str). Returns: str.</li><li><code>_template_path(entity_name: str)</code> &ndash; Prefer campaign-local template if it exists, else fall back to defaults. Parameters: entity_name (type str). Returns: str.</li><li><code>_load_base_template(entity_name: str)</code> &ndash; Load the current template JSON (campaign-local if present). Parameters: entity_name (type str). Returns: dict.</li><li><code>load_template(entity_name: str)</code> &ndash; Load template and return merged fields (fields + custom_fields if present).

Built-in fields remain separate inside the file under "fields". User-added
fields are persisted under "custom_fields" and merged at runtime for UI. Parameters: entity_name (type str). Returns: dict.</li><li><code>save_custom_fields(entity_name: str, fields: list)</code> &ndash; Write custom fields into the entity template file under "custom_fields" key.

File format goal: keep the overall JSON pretty-printed with indent=2, but
ensure each custom field object is rendered on a single line for clarity. Parameters: entity_name (type str); fields (type list).</li><li><code>list_known_entities()</code> &ndash; Returns: list.</li></ul></section>
<section class='module'><h3>modules\helpers\text_helpers.py</h3><p></p><h4>Functions</h4><ul><li><code>format_longtext(data, max_length=30000)</code> &ndash; Formate un champ longtext pour l'afficher dans une liste (abrégé + multi-lignes). Parameters: data; max_length (default 30000).</li><li><code>format_multiline_text(data, max_length=30000)</code> &ndash; Like format_longtext but *preserves* newlines for HTML &lt;pre‑wrap&gt; output. Parameters: data; max_length (default 30000).</li><li><code>rtf_to_html(rtf)</code> &ndash; Convert RTF-JSON {"text":…, "formatting":…} into HTML, handling:
- numeric offsets (e.g. "0", "26")
- Tk indices (e.g. "1.26" for line 1, column 26) Parameters: rtf.</li><li><code>normalize_rtf_json(rtf, text_widget=None)</code> &ndash; Convert any { text:str, formatting:{ tag:[[s,e],…], … } }
where s/e might be "line.char" (e.g. "1.26")
into integer offsets. Parameters: rtf; text_widget (default None).</li><li><code>ai_text_to_rtf_json(raw_text)</code> &ndash; Convert an AI answer (plain text with light Markdown/HTML) to our RTF-JSON:
{"text": str, "formatting": { tag: [(start,end), ...], ... }}

Supported inline markers:
- Bold: **text**, __text__, &lt;b&gt;text&lt;/b&gt;, &lt;strong&gt;text&lt;/strong&gt;
- Italic: *text*, _text_, &lt;i&gt;text&lt;/i&gt;, &lt;em&gt;text&lt;/em&gt;
- Underline: ++text++, &lt;u&gt;text&lt;/u&gt;

Block helpers:
- Headings: #, ##, ### → size_22/18/16 on the full line text
- Bullets: lines starting with "- " or "* " are turned into "• " prefix
- Numbered: lines starting with "1. ", "2) ", etc. are kept as-is

Returns formatting with numeric offsets suitable for RichTextEditor.load_text_data. Parameters: raw_text.</li><li><code>_coerce_text(val)</code> &ndash; Parameters: val.</li><li><code>format_longtext(data, max_length=30000)</code> &ndash; Parameters: data; max_length (default 30000).</li><li><code>format_multiline_text(data, max_length=30000)</code> &ndash; Parameters: data; max_length (default 30000).</li></ul></section>
<section class='module'><h3>modules\helpers\window_helper.py</h3><p></p><h4>Functions</h4><ul><li><code>position_window_at_top(window, width=None, height=None)</code> &ndash; Positionne une fenêtre au sommet de l'écran, centrée horizontalement.

Args:
    window: la fenêtre CustomTkinter ou Tkinter à positionner.
    width: largeur fixe (facultatif). Si None, utilise la taille actuelle.
    height: hauteur fixe (facultatif). Si None, utilise la taille actuelle. Parameters: window; width (default None); height (default None).</li></ul></section>
<section class='module'><h3>modules\informations\informations_model.py</h3><p></p><h4>Functions</h4><ul><li><code>load()</code> &ndash; No inline documentation available.</li><li><code>save(items)</code> &ndash; Parameters: items.</li></ul></section>
<section class='module'><h3>modules\maps\controllers\display_map_controller.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class DisplayMapController</h4><p></p><ul><li><code>__init__(self, parent, maps_wrapper, map_template)</code> &ndash; Parameters: parent; maps_wrapper; map_template.</li><li><code>open_global_search(self, event=None)</code> &ndash; Parameters: event (default None).</li><li><code>_push_fog_history(self)</code> &ndash; No inline documentation available.</li><li><code>undo_fog(self, event=None)</code> &ndash; Parameters: event (default None).</li><li><code>_on_token_right_click(self, event, token)</code> &ndash; Parameters: event; token.</li><li><code>_on_token_double_click(self, event, token)</code> &ndash; Parameters: event; token.</li><li><code>_create_marker(self)</code> &ndash; No inline documentation available.</li><li><code>_schedule_marker_animation(self)</code> &ndash; No inline documentation available.</li><li><code>_animate_marker(self)</code> &ndash; No inline documentation available.</li><li><code>_on_middle_click(self, event)</code> &ndash; Parameters: event.</li><li><code>_on_middle_drag(self, event)</code> &ndash; Parameters: event.</li><li><code>_on_middle_release(self, event)</code> &ndash; Parameters: event.</li><li><code>_nudge_canvas(self, dx, dy)</code> &ndash; Move all visible canvas items by dx,dy without recomputing images. Parameters: dx; dy.</li><li><code>_on_mouse_down(self, event)</code> &ndash; Parameters: event.</li><li><code>_on_mouse_move(self, event)</code> &ndash; Parameters: event.</li><li><code>_on_mouse_up(self, event)</code> &ndash; Parameters: event.</li><li><code>_perform_zoom(self, final: bool)</code> &ndash; Parameters: final (type bool).</li><li><code>_update_canvas_images(self, resample=Image.LANCZOS)</code> &ndash; Parameters: resample (default Image.LANCZOS).</li><li><code>_bind_item_events(self, item)</code> &ndash; Parameters: item.</li><li><code>_on_item_press(self, event, item)</code> &ndash; Parameters: event; item.</li><li><code>_on_item_move(self, event, item)</code> &ndash; Parameters: event; item.</li><li><code>_on_item_release(self, event, item)</code> &ndash; Parameters: event; item.</li><li><code>_on_item_right_click(self, event, item)</code> &ndash; Parameters: event; item.</li><li><code>_show_shape_menu(self, event, shape)</code> &ndash; Parameters: event; shape.</li><li><code>_edit_shape_color_dialog(self, shape)</code> &ndash; Parameters: shape.</li><li><code>_resize_shape_dialog(self, shape)</code> &ndash; Parameters: shape.</li><li><code>_resize_token_dialog(self, token)</code> &ndash; Opens a dialog to resize the given token. Parameters: token.</li><li><code>_show_token_menu(self, event, token)</code> &ndash; Displays a context menu for the given token. Parameters: event; token.</li><li><code>_prompt_change_token_border_color(self, token)</code> &ndash; Prompts the user for a new border color for the token. Parameters: token.</li><li><code>_toggle_shape_fill(self, shape)</code> &ndash; Parameters: shape.</li><li><code>_copy_item(self, item_to_copy=None)</code> &ndash; Parameters: item_to_copy (default None).</li><li><code>_paste_item(self, event=None)</code> &ndash; Parameters: event (default None).</li><li><code>_delete_item(self, item_to_delete)</code> &ndash; Parameters: item_to_delete.</li><li><code>_bring_item_to_front(self, item)</code> &ndash; Parameters: item.</li><li><code>_send_item_to_back(self, item)</code> &ndash; Parameters: item.</li><li><code>_on_max_hp_menu_click(self, event, token)</code> &ndash; Parameters: event; token.</li><li><code>_on_max_hp_entry_commit(self, event, token)</code> &ndash; Parameters: event; token.</li><li><code>_on_hp_double_click(self, event, token)</code> &ndash; Parameters: event; token.</li><li><code>_on_hp_entry_commit(self, event, token)</code> &ndash; Parameters: event; token.</li><li><code>on_resize(self)</code> &ndash; No inline documentation available.</li><li><code>on_zoom(self, event)</code> &ndash; Parameters: event.</li><li><code>save_map(self)</code> &ndash; No inline documentation available.</li><li><code>_on_drawing_tool_change(self, selected_tool: str)</code> &ndash; Parameters: selected_tool (type str).</li><li><code>_on_shape_fill_mode_change(self, selected_mode: str)</code> &ndash; Parameters: selected_mode (type str).</li><li><code>_on_pick_shape_fill_color(self)</code> &ndash; No inline documentation available.</li><li><code>_on_pick_shape_border_color(self)</code> &ndash; No inline documentation available.</li><li><code>_update_shape_controls_visibility(self)</code> &ndash; No inline documentation available.</li><li><code>_activate_graphical_resize(self, shape)</code> &ndash; Parameters: shape.</li><li><code>_draw_resize_handles(self, item)</code> &ndash; Parameters: item.</li><li><code>_remove_resize_handles(self)</code> &ndash; No inline documentation available.</li><li><code>_on_resize_handle_press(self, event, handle_type)</code> &ndash; Parameters: event; handle_type.</li><li><code>_on_resize_handle_move(self, event)</code> &ndash; Parameters: event.</li><li><code>_on_resize_handle_release(self, event)</code> &ndash; Parameters: event.</li></ul></div></section>
<section class='module'><h3>modules\maps\maps_model.py</h3><p></p><h4>Functions</h4><ul><li><code>load()</code> &ndash; No inline documentation available.</li><li><code>save(items)</code> &ndash; Parameters: items.</li></ul></section>
<section class='module'><h3>modules\maps\services\entity_picker_service.py</h3><p></p><h4>Functions</h4><ul><li><code>open_entity_picker(self, entity_type)</code> &ndash; Show a GenericListSelectionView for NPCs or Creatures. Parameters: entity_type.</li><li><code>on_entity_selected(self, entity_type, entity_name, picker_frame)</code> &ndash; Called when user picks an NPC or Creature in the selection dialog. Parameters: entity_type; entity_name; picker_frame.</li></ul></section>
<section class='module'><h3>modules\maps\services\fog_manager.py</h3><p></p><h4>Functions</h4><ul><li><code>_set_fog(self, mode)</code> &ndash; Parameters: mode.</li><li><code>clear_fog(self)</code> &ndash; No inline documentation available.</li><li><code>reset_fog(self)</code> &ndash; No inline documentation available.</li><li><code>on_paint(self, event)</code> &ndash; Paint or erase fog using a square brush of size self.brush_size,
with semi-transparent black (alpha=128) for fog. Parameters: event.</li></ul></section>
<section class='module'><h3>modules\maps\services\token_manager.py</h3><p></p><h4>Functions</h4><ul><li><code>add_token(self, path, entity_type, entity_name, entity_record=None)</code> &ndash; Parameters: path; entity_type; entity_name; entity_record (default None).</li><li><code>_on_token_press(self, event, token)</code> &ndash; Parameters: event; token.</li><li><code>_on_token_move(self, event, token)</code> &ndash; Parameters: event; token.</li><li><code>_on_token_release(self, event, token)</code> &ndash; Parameters: event; token.</li><li><code>_copy_token(self, event=None)</code> &ndash; Copy the last‐clicked token’s data into a buffer. Parameters: event (default None).</li><li><code>_paste_token(self, event=None)</code> &ndash; Parameters: event (default None).</li><li><code>_resize_token_dialog(self, token)</code> &ndash; Prompt for a new px size, then redraw just that token. Parameters: token.</li><li><code>_change_token_border_color(self, token)</code> &ndash; Open a color chooser and update the token’s border. Parameters: token.</li><li><code>_delete_token(self, token)</code> &ndash; Remove a token’s canvas items (image, border, name, HP UI, info widget, edit entries) and its data. Parameters: token.</li><li><code>_persist_tokens(self)</code> &ndash; Quickly capture token state, then hand off the heavy write to a daemon thread.</li></ul></section>
<section class='module'><h3>modules\maps\utils\icon_loader.py</h3><p></p><h4>Functions</h4><ul><li><code>load_icon(self, path, size=(32,32))</code> &ndash; Parameters: path; size (default (32,32)).</li></ul></section>
<section class='module'><h3>modules\maps\views\canvas_view.py</h3><p></p><h4>Functions</h4><ul><li><code>_build_canvas(self)</code> &ndash; No inline documentation available.</li><li><code>_on_delete_key(self, event=None)</code> &ndash; If an item (token or shape) is selected, delete it on Delete key. Parameters: event (default None).</li><li><code>on_paint2(self, event)</code> &ndash; Paint or erase fog using a square brush of size self.brush_size,
with semi-transparent black (alpha=128) for fog. Parameters: event.</li></ul></section>
<section class='module'><h3>modules\maps\views\fullscreen_view.py</h3><p></p><h4>Functions</h4><ul><li><code>open_fullscreen(self)</code> &ndash; No inline documentation available.</li><li><code>_update_fullscreen_map(self)</code> &ndash; Mirror the GM canvas into the fullscreen window.</li></ul></section>
<section class='module'><h3>modules\maps\views\map_selector.py</h3><p></p><h4>Functions</h4><ul><li><code>select_map(self)</code> &ndash; Show the full‐frame map selector, replacing any existing UI.</li><li><code>_on_display_map(self, entity_type, map_name)</code> &ndash; Callback from selector: build editor UI and load the chosen map. Parameters: entity_type; map_name.</li></ul></section>
<section class='module'><h3>modules\maps\views\toolbar_view.py</h3><p></p><h4>Functions</h4><ul><li><code>_build_toolbar(self)</code> &ndash; No inline documentation available.</li><li><code>_on_brush_size_change(self, val)</code> &ndash; Parameters: val.</li><li><code>_on_brush_shape_change(self, val)</code> &ndash; Parameters: val.</li><li><code>_change_brush(self, delta)</code> &ndash; Parameters: delta.</li><li><code>_on_token_size_change(self, val)</code> &ndash; Parameters: val.</li></ul></section>
<section class='module'><h3>modules\maps\views\web_display_view.py</h3><p></p><h4>Functions</h4><ul><li><code>open_web_display(self, port=None)</code> &ndash; Parameters: port (default None).</li><li><code>_render_map_image(self)</code> &ndash; No inline documentation available.</li><li><code>_update_web_display_map(self)</code> &ndash; No inline documentation available.</li><li><code>close_web_display(self, port=None)</code> &ndash; Shut down the web display server if it is running.

The server is stopped using Werkzeug's ``shutdown`` API rather than
sending an HTTP request to a dedicated route. Parameters: port (default None).</li></ul></section>
<section class='module'><h3>modules\npcs\npc_graph_editor.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class NPCGraphEditor (ctk.CTkFrame)</h4><p></p><ul><li><code>__init__(self, master, npc_wrapper: GenericModelWrapper, faction_wrapper: GenericModelWrapper, *args, **kwargs)</code> &ndash; Parameters: master; npc_wrapper (type GenericModelWrapper); faction_wrapper (type GenericModelWrapper); args (variadic positional); kwargs (variadic keyword).</li><li><code>_on_zoom(self, event)</code> &ndash; Parameters: event.</li><li><code>open_npc_editor(self, event)</code> &ndash; Parameters: event.</li><li><code>display_portrait_window(self)</code> &ndash; Display the NPC's portrait in a normal window (with decorations) that is
sized and positioned to cover the second monitor (if available).</li><li><code>_on_mousewheel_y(self, event)</code> &ndash; Parameters: event.</li><li><code>get_state(self)</code> &ndash; No inline documentation available.</li><li><code>set_state(self, state)</code> &ndash; Parameters: state.</li><li><code>_on_mousewheel_x(self, event)</code> &ndash; Parameters: event.</li><li><code>init_toolbar(self)</code> &ndash; No inline documentation available.</li><li><code>reset_zoom(self)</code> &ndash; No inline documentation available.</li><li><code>start_link_creation(self)</code> &ndash; No inline documentation available.</li><li><code>select_first_node(self, event)</code> &ndash; Parameters: event.</li><li><code>select_second_node(self, event)</code> &ndash; Parameters: event.</li><li><code>prompt_link_text(self)</code> &ndash; No inline documentation available.</li><li><code>add_link(self, tag1, tag2, link_text)</code> &ndash; Parameters: tag1; tag2; link_text.</li><li><code>add_npc(self)</code> &ndash; No inline documentation available.</li><li><code>place_pending_npc(self, event)</code> &ndash; Parameters: event.</li><li><code>add_faction(self)</code> &ndash; No inline documentation available.</li><li><code>update_links_positions_for_node(self, node_tag)</code> &ndash; Parameters: node_tag.</li><li><code>update_links_for_node(self, node_tag)</code> &ndash; Parameters: node_tag.</li><li><code>delete_shape(self, tag)</code> &ndash; Parameters: tag.</li><li><code>on_right_click(self, event)</code> &ndash; Parameters: event.</li><li><code>show_color_menu(self, x, y)</code> &ndash; Parameters: x; y.</li><li><code>show_link_menu(self, x, y)</code> &ndash; Parameters: x; y.</li><li><code>show_node_menu(self, x, y)</code> &ndash; Parameters: x; y.</li><li><code>set_arrow_mode(self, new_mode)</code> &ndash; Parameters: new_mode.</li><li><code>delete_node(self)</code> &ndash; No inline documentation available.</li><li><code>redraw_after_drag(self)</code> &ndash; No inline documentation available.</li><li><code>_on_canvas_configure(self, event)</code> &ndash; Whenever the canvas is resized (or we manually call this),
redraw the background to fill the full width/height. Parameters: event.</li><li><code>draw_nodes(self)</code> &ndash; No inline documentation available.</li><li><code>draw_all_links(self)</code> &ndash; No inline documentation available.</li><li><code>draw_one_link(self, link)</code> &ndash; Parameters: link.</li><li><code>draw_arrowhead(self, start_x, start_y, end_x, end_y, node_tag)</code> &ndash; Parameters: start_x; start_y; end_x; end_y; node_tag.</li><li><code>save_graph(self)</code> &ndash; No inline documentation available.</li><li><code>load_graph(self, path=None)</code> &ndash; Parameters: path (default None).</li><li><code>change_node_color(self, color)</code> &ndash; Parameters: color.</li><li><code>change_shape_color(self, tag, color)</code> &ndash; Parameters: tag; color.</li><li><code>show_shape_menu(self, x, y, shape_tag)</code> &ndash; Parameters: x; y; shape_tag.</li><li><code>bring_to_front(self, shape_tag)</code> &ndash; Parameters: shape_tag.</li><li><code>send_to_back(self, tag=None)</code> &ndash; Parameters: tag (default None).</li><li><code>activate_resize_mode(self, shape_tag)</code> &ndash; Parameters: shape_tag.</li><li><code>start_resizing(self, event)</code> &ndash; Parameters: event.</li><li><code>do_resizing(self, event)</code> &ndash; Parameters: event.</li><li><code>end_resizing(self, event)</code> &ndash; Parameters: event.</li><li><code>distance_point_to_line(self, px, py, x1, y1, x2, y2)</code> &ndash; Parameters: px; py; x1; y1; x2; y2.</li><li><code>get_link_by_position(self, x, y)</code> &ndash; Parameters: x; y.</li><li><code>add_shape(self, shape_type)</code> &ndash; Parameters: shape_type.</li><li><code>draw_shape(self, shape)</code> &ndash; Parameters: shape.</li><li><code>draw_all_shapes(self)</code> &ndash; No inline documentation available.</li><li><code>save_graph(self, path=None)</code> &ndash; Parameters: path (default None).</li><li><code>load_portrait_scaled(self, portrait_path, node_tag, scale=1.0)</code> &ndash; Parameters: portrait_path; node_tag; scale (default 1.0).</li><li><code>draw_graph(self)</code> &ndash; No inline documentation available.</li><li><code>start_drag(self, event)</code> &ndash; Parameters: event.</li><li><code>on_drag(self, event)</code> &ndash; Parameters: event.</li><li><code>end_drag(self, event)</code> &ndash; Parameters: event.</li></ul></div></section>
<section class='module'><h3>modules\npcs\npc_opener.py</h3><p></p><h4>Functions</h4><ul><li><code>open_npc_editor_window(npc_name)</code> &ndash; Opens the specified NPC in a new GenericEditorWindow,
completely detached from the scenario/tabs system. Parameters: npc_name.</li></ul></section>
<section class='module'><h3>modules\npcs\npcs_model.py</h3><p></p><h4>Functions</h4><ul><li><code>load()</code> &ndash; No inline documentation available.</li><li><code>save(items)</code> &ndash; Parameters: items.</li></ul></section>
<section class='module'><h3>modules\objects\objects_model.py</h3><p></p><h4>Functions</h4><ul><li><code>load()</code> &ndash; No inline documentation available.</li><li><code>save(items)</code> &ndash; Parameters: items.</li></ul></section>
<section class='module'><h3>modules\pcs\display_pcs.py</h3><p></p><h4>Functions</h4><ul><li><code>display_pcs_in_banner(banner_frame, pcs_items)</code> &ndash; Parameters: banner_frame; pcs_items.</li></ul></section>
<section class='module'><h3>modules\pcs\pc_graph_editor.py</h3><p></p><h4>Functions</h4><ul><li><code>get_monitors()</code> &ndash; No inline documentation available.</li></ul><div class='class'><h4>class PCGraphEditor (ctk.CTkFrame)</h4><p></p><ul><li><code>__init__(self, master, pc_wrapper: GenericModelWrapper, faction_wrapper: GenericModelWrapper, *args, **kwargs)</code> &ndash; Parameters: master; pc_wrapper (type GenericModelWrapper); faction_wrapper (type GenericModelWrapper); args (variadic positional); kwargs (variadic keyword).</li><li><code>open_pc_editor(self, event)</code> &ndash; Parameters: event.</li><li><code>display_portrait_window(self)</code> &ndash; Delegate portrait‐popping to the shared `show_portrait` helper.</li><li><code>_on_mousewheel_y(self, event)</code> &ndash; Parameters: event.</li><li><code>get_state(self)</code> &ndash; No inline documentation available.</li><li><code>set_state(self, state)</code> &ndash; Parameters: state.</li><li><code>_on_mousewheel_x(self, event)</code> &ndash; Parameters: event.</li><li><code>init_toolbar(self)</code> &ndash; No inline documentation available.</li><li><code>start_link_creation(self)</code> &ndash; No inline documentation available.</li><li><code>select_first_node(self, event)</code> &ndash; Parameters: event.</li><li><code>select_second_node(self, event)</code> &ndash; Parameters: event.</li><li><code>prompt_link_text(self)</code> &ndash; No inline documentation available.</li><li><code>add_link(self, tag1, tag2, link_text)</code> &ndash; Parameters: tag1; tag2; link_text.</li><li><code>add_pc(self)</code> &ndash; No inline documentation available.</li><li><code>place_pending_pc(self, event)</code> &ndash; Parameters: event.</li><li><code>add_faction(self)</code> &ndash; No inline documentation available.</li><li><code>update_links_positions_for_node(self, node_tag)</code> &ndash; Parameters: node_tag.</li><li><code>update_links_for_node(self, node_tag)</code> &ndash; Parameters: node_tag.</li><li><code>delete_shape(self, tag)</code> &ndash; Parameters: tag.</li><li><code>on_right_click(self, event)</code> &ndash; Parameters: event.</li><li><code>show_color_menu(self, x, y)</code> &ndash; Parameters: x; y.</li><li><code>show_link_menu(self, x, y)</code> &ndash; Parameters: x; y.</li><li><code>show_node_menu(self, x, y)</code> &ndash; Parameters: x; y.</li><li><code>set_arrow_mode(self, new_mode)</code> &ndash; Parameters: new_mode.</li><li><code>delete_node(self)</code> &ndash; No inline documentation available.</li><li><code>redraw_after_drag(self)</code> &ndash; No inline documentation available.</li><li><code>draw_nodes(self)</code> &ndash; No inline documentation available.</li><li><code>draw_all_links(self)</code> &ndash; No inline documentation available.</li><li><code>draw_one_link(self, link)</code> &ndash; Parameters: link.</li><li><code>draw_arrowhead(self, start_x, start_y, end_x, end_y, node_tag)</code> &ndash; Parameters: start_x; start_y; end_x; end_y; node_tag.</li><li><code>save_graph(self)</code> &ndash; No inline documentation available.</li><li><code>load_graph(self)</code> &ndash; No inline documentation available.</li><li><code>change_node_color(self, color)</code> &ndash; Parameters: color.</li><li><code>change_shape_color(self, tag, color)</code> &ndash; Parameters: tag; color.</li><li><code>show_shape_menu(self, x, y, shape_tag)</code> &ndash; Parameters: x; y; shape_tag.</li><li><code>bring_to_front(self, shape_tag)</code> &ndash; Parameters: shape_tag.</li><li><code>send_to_back(self, shape_tag)</code> &ndash; Parameters: shape_tag.</li><li><code>activate_resize_mode(self, shape_tag)</code> &ndash; Parameters: shape_tag.</li><li><code>start_resizing(self, event)</code> &ndash; Parameters: event.</li><li><code>do_resizing(self, event)</code> &ndash; Parameters: event.</li><li><code>end_resizing(self, event)</code> &ndash; Parameters: event.</li><li><code>distance_point_to_line(self, px, py, x1, y1, x2, y2)</code> &ndash; Parameters: px; py; x1; y1; x2; y2.</li><li><code>get_link_by_position(self, x, y)</code> &ndash; Parameters: x; y.</li><li><code>add_shape(self, shape_type)</code> &ndash; Parameters: shape_type.</li><li><code>draw_shape(self, shape)</code> &ndash; Parameters: shape.</li><li><code>draw_all_shapes(self)</code> &ndash; No inline documentation available.</li><li><code>save_graph(self)</code> &ndash; No inline documentation available.</li><li><code>draw_graph(self)</code> &ndash; No inline documentation available.</li><li><code>start_drag(self, event)</code> &ndash; Parameters: event.</li><li><code>on_drag(self, event)</code> &ndash; Parameters: event.</li><li><code>end_drag(self, event)</code> &ndash; Parameters: event.</li></ul></div></section>
<section class='module'><h3>modules\pcs\pc_opener.py</h3><p></p><h4>Functions</h4><ul><li><code>open_pc_editor_window(pc_name)</code> &ndash; Opens the specified NPC in a new GenericEditorWindow,
completely detached from the scenario/tabs system. Parameters: pc_name.</li></ul></section>
<section class='module'><h3>modules\pcs\pcs_model.py</h3><p></p><h4>Functions</h4><ul><li><code>load()</code> &ndash; No inline documentation available.</li><li><code>save(items)</code> &ndash; Parameters: items.</li></ul></section>
<section class='module'><h3>modules\places\places_model.py</h3><p></p><h4>Functions</h4><ul><li><code>load()</code> &ndash; No inline documentation available.</li><li><code>save(items)</code> &ndash; Parameters: items.</li></ul></section>
<section class='module'><h3>modules\scenarios\gm_screen_view.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class GMScreenView (ctk.CTkFrame)</h4><p></p><ul><li><code>__init__(self, master, scenario_item, *args, **kwargs)</code> &ndash; Parameters: master; scenario_item; args (variadic positional); kwargs (variadic keyword).</li><li><code>open_global_search(self, event=None)</code> &ndash; Parameters: event (default None).</li><li><code>load_template(self, filename)</code> &ndash; Parameters: filename.</li><li><code>add_tab(self, name, content_frame, content_factory=None)</code> &ndash; Parameters: name; content_frame; content_factory (default None).</li><li><code>_on_tab_press(self, event, name)</code> &ndash; Parameters: event; name.</li><li><code>_on_tab_motion(self, event, name)</code> &ndash; Parameters: event; name.</li><li><code>_trigger_shift(self, other_name, dx)</code> &ndash; Parameters: other_name; dx.</li><li><code>_animate_shift(self, frames, deltas, step=0)</code> &ndash; Parameters: frames; deltas; step (default 0).</li><li><code>_swap_order(self, name, other)</code> &ndash; Parameters: name; other.</li><li><code>_on_tab_release(self, event, name)</code> &ndash; Parameters: event; name.</li><li><code>toggle_detach_tab(self, name)</code> &ndash; Parameters: name.</li><li><code>detach_tab(self, name)</code> &ndash; Parameters: name.</li><li><code>create_note_frame(self, master=None, initial_text="")</code> &ndash; Parameters: master (default None); initial_text (default "").</li><li><code>reattach_tab(self, name)</code> &ndash; Parameters: name.</li><li><code>close_tab(self, name)</code> &ndash; Parameters: name.</li><li><code>reposition_add_button(self)</code> &ndash; No inline documentation available.</li><li><code>_add_random_entity(self)</code> &ndash; Pick a random NPC, Creature, Object, Information or Clue and open it.</li><li><code>show_tab(self, name)</code> &ndash; Parameters: name.</li><li><code>add_new_tab(self)</code> &ndash; No inline documentation available.</li><li><code>open_selection_window(self, entity_type, popup)</code> &ndash; Parameters: entity_type; popup.</li><li><code>open_entity_tab(self, entity_type, name)</code> &ndash; Open a new tab for a specific entity with its details.

Args:
    entity_type (str): The type of entity (e.g., 'Scenarios', 'NPCs', 'Creatures').
    name (str): The name or title of the specific entity to display.

Raises:
    messagebox.showerror: If the specified entity cannot be found in the wrapper.

Creates a new tab with the entity's details using a shared factory function,
and provides a mechanism to recursively open related entities. Parameters: entity_type; name.</li><li><code>create_scenario_graph_frame(self, master=None)</code> &ndash; Parameters: master (default None).</li><li><code>create_entity_frame(self, entity_type, entity, master=None)</code> &ndash; Parameters: entity_type; entity; master (default None).</li><li><code>insert_text(self, parent, header, content)</code> &ndash; Parameters: parent; header; content.</li><li><code>insert_longtext(self, parent, header, content)</code> &ndash; Parameters: parent; header; content.</li><li><code>insert_links(self, parent, header, items, linked_type)</code> &ndash; Parameters: parent; header; items; linked_type.</li><li><code>_on_link_clicked(self, linked_type, item, event=None)</code> &ndash; Parameters: linked_type; item; event (default None).</li><li><code>save_note_to_file(self, note_frame, default_name)</code> &ndash; Parameters: note_frame; default_name.</li><li><code>create_npc_graph_frame(self, master=None)</code> &ndash; Parameters: master (default None).</li><li><code>create_pc_graph_frame(self, master=None)</code> &ndash; Parameters: master (default None).</li><li><code>reorder_detached_windows(self)</code> &ndash; No inline documentation available.</li><li><code>destroy(self)</code> &ndash; No inline documentation available.</li></ul></div></section>
<section class='module'><h3>modules\scenarios\scenario_generator_view.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class ScenarioGeneratorView (ctk.CTkFrame)</h4><p>Frame embedding the scenario generator inside the main application.</p><ul><li><code>__init__(self, parent)</code> &ndash; Parameters: parent.</li><li><code>_build_widgets(self)</code> &ndash; No inline documentation available.</li><li><code>generate_campaign(self)</code> &ndash; No inline documentation available.</li><li><code>export_docx(self)</code> &ndash; No inline documentation available.</li><li><code>add_to_db(self)</code> &ndash; No inline documentation available.</li></ul></div></section>
<section class='module'><h3>modules\scenarios\scenario_graph_editor.py</h3><p></p><h4>Functions</h4><ul><li><code>clean_longtext(data, max_length=2000)</code> &ndash; Parameters: data; max_length (default 2000).</li><li><code>make_watermarked_postit(base_path, icon_path, size=(200,200), icon_size=32, margin=8, opacity=80)</code> &ndash; Parameters: base_path; icon_path; size (default (200,200)); icon_size (default 32); margin (default 8); opacity (default 80).</li></ul><div class='class'><h4>class ScenarioGraphEditor (ctk.CTkFrame)</h4><p></p><ul><li><code>__init__(self, master, scenario_wrapper: GenericModelWrapper, npc_wrapper: GenericModelWrapper, creature_wrapper: GenericModelWrapper, place_wrapper: GenericModelWrapper, *args, **kwargs)</code> &ndash; Parameters: master; scenario_wrapper (type GenericModelWrapper); npc_wrapper (type GenericModelWrapper); creature_wrapper (type GenericModelWrapper); place_wrapper (type GenericModelWrapper); args (variadic positional); kwargs (variadic keyword).</li><li><code>_on_zoom(self, event)</code> &ndash; Parameters: event.</li><li><code>reset_zoom(self)</code> &ndash; No inline documentation available.</li><li><code>init_toolbar(self)</code> &ndash; No inline documentation available.</li><li><code>select_scenario(self)</code> &ndash; No inline documentation available.</li><li><code>display_portrait_window(self)</code> &ndash; No inline documentation available.</li><li><code>load_scenario(self, scenario)</code> &ndash; Parameters: scenario.</li><li><code>draw_graph(self)</code> &ndash; No inline documentation available.</li><li><code>load_portrait(self, portrait_path, node_tag)</code> &ndash; Parameters: portrait_path; node_tag.</li><li><code>load_portrait_scaled(self, portrait_path, node_tag, scale=1.0)</code> &ndash; Parameters: portrait_path; node_tag; scale (default 1.0).</li><li><code>draw_nodes(self)</code> &ndash; No inline documentation available.</li><li><code>draw_links(self)</code> &ndash; No inline documentation available.</li><li><code>draw_one_link(self, link)</code> &ndash; Parameters: link.</li><li><code>start_drag(self, event)</code> &ndash; Parameters: event.</li><li><code>on_drag(self, event)</code> &ndash; Parameters: event.</li><li><code>on_double_click(self, event)</code> &ndash; Parameters: event.</li><li><code>on_right_click(self, event)</code> &ndash; Parameters: event.</li><li><code>_on_mousewheel_y(self, event)</code> &ndash; Parameters: event.</li><li><code>_on_mousewheel_x(self, event)</code> &ndash; Parameters: event.</li><li><code>show_node_menu(self, x, y)</code> &ndash; Parameters: x; y.</li><li><code>show_color_menu(self, x, y)</code> &ndash; Parameters: x; y.</li><li><code>change_node_color(self, color)</code> &ndash; Parameters: color.</li><li><code>delete_node(self)</code> &ndash; No inline documentation available.</li><li><code>save_graph(self)</code> &ndash; No inline documentation available.</li><li><code>load_graph(self)</code> &ndash; No inline documentation available.</li><li><code>get_state(self)</code> &ndash; No inline documentation available.</li><li><code>set_state(self, state)</code> &ndash; Parameters: state.</li><li><code>load_icon(self, path, size, opacity)</code> &ndash; Parameters: path; size; opacity.</li></ul></div></section>
<section class='module'><h3>modules\scenarios\scenario_importer.py</h3><p></p><h4>Functions</h4><ul></ul></section>
<section class='module'><h3>modules\scenarios\scenarios_model.py</h3><p></p><h4>Functions</h4><ul><li><code>load()</code> &ndash; No inline documentation available.</li><li><code>save(items)</code> &ndash; Parameters: items.</li></ul></section>
<section class='module'><h3>modules\ui\icon_button.py</h3><p></p><h4>Functions</h4><ul><li><code>create_icon_button(parent, icon, tooltip_text, command)</code> &ndash; Parameters: parent; icon; tooltip_text; command.</li></ul></section>
<section class='module'><h3>modules\ui\image_viewer.py</h3><p></p><h4>Functions</h4><ul><li><code>_get_monitors()</code> &ndash; Return list of (x, y, width, height).</li><li><code>show_portrait(path, title=None)</code> &ndash; Display a full‑screen CTkToplevel showing the image at `path`.
Clicking anywhere closes the window. Parameters: path; title (default None).</li></ul></section>
<section class='module'><h3>modules\ui\second_screen_display.py</h3><p></p><h4>Functions</h4><ul><li><code>show_entity_on_second_screen(item, title, fields)</code> &ndash; Open a fullscreen window on the second monitor displaying selected fields of an entity.

- item: dict of entity data
- title: string for main heading
- fields: list of field names to display (may include 'Portrait') Parameters: item; title; fields.</li></ul></section>
<section class='module'><h3>modules\ui\tooltip.py</h3><p></p><h4>Functions</h4><ul></ul><div class='class'><h4>class ToolTip</h4><p></p><ul><li><code>__init__(self, widget, text, delay=500)</code> &ndash; Parameters: widget; text; delay (default 500).</li><li><code>schedule_wrapper(self, event=None)</code> &ndash; Parameters: event (default None).</li><li><code>schedule(self)</code> &ndash; No inline documentation available.</li><li><code>cancel(self, event=None)</code> &ndash; Parameters: event (default None).</li><li><code>showtip(self)</code> &ndash; No inline documentation available.</li><li><code>hidetip(self)</code> &ndash; No inline documentation available.</li></ul></div></section>
<section class='module'><h3>modules\web\GM_webviewer.py</h3><p></p><h4>Functions</h4><ul><li><code>load_user(user_id)</code> &ndash; Parameters: user_id.</li><li><code>login()</code> &ndash; No inline documentation available.</li><li><code>register()</code> &ndash; No inline documentation available.</li><li><code>logout()</code> &ndash; No inline documentation available.</li><li><code>list_entries()</code> &ndash; No inline documentation available.</li><li><code>view_entry(entry_id)</code> &ndash; Parameters: entry_id.</li><li><code>new_entry()</code> &ndash; No inline documentation available.</li><li><code>edit_entry(entry_id)</code> &ndash; Parameters: entry_id.</li><li><code>delete_entry(entry_id)</code> &ndash; Parameters: entry_id.</li><li><code>load_links()</code> &ndash; No inline documentation available.</li><li><code>save_links_list(links_list)</code> &ndash; Parameters: links_list.</li><li><code>save_link(link)</code> &ndash; Parameters: link.</li><li><code>delete_clue_link()</code> &ndash; No inline documentation available.</li><li><code>delete_clue()</code> &ndash; No inline documentation available.</li><li><code>load_positions()</code> &ndash; No inline documentation available.</li><li><code>save_positions(positions)</code> &ndash; Parameters: positions.</li><li><code>get_graph_list()</code> &ndash; No inline documentation available.</li><li><code>get_portrait_mapping()</code> &ndash; No inline documentation available.</li><li><code>get_places_list()</code> &ndash; No inline documentation available.</li><li><code>get_informations_list()</code> &ndash; No inline documentation available.</li><li><code>get_clues_list()</code> &ndash; No inline documentation available.</li><li><code>default()</code> &ndash; No inline documentation available.</li><li><code>welcome()</code> &ndash; No inline documentation available.</li><li><code>npc_view()</code> &ndash; No inline documentation available.</li><li><code>locations_view()</code> &ndash; No inline documentation available.</li><li><code>news_view()</code> &ndash; No inline documentation available.</li><li><code>clues_view()</code> &ndash; No inline documentation available.</li><li><code>get_clue_links()</code> &ndash; No inline documentation available.</li><li><code>add_clue_link()</code> &ndash; No inline documentation available.</li><li><code>npc_graph()</code> &ndash; No inline documentation available.</li><li><code>get_clue_positions()</code> &ndash; No inline documentation available.</li><li><code>set_clue_position()</code> &ndash; No inline documentation available.</li><li><code>get_portrait(filename)</code> &ndash; Parameters: filename.</li><li><code>get_asset(filename)</code> &ndash; Parameters: filename.</li><li><code>get_css(filename)</code> &ndash; Parameters: filename.</li><li><code>set_all_clue_positions()</code> &ndash; No inline documentation available.</li><li><code>information_upload(filename)</code> &ndash; Parameters: filename.</li><li><code>clue_upload(filename)</code> &ndash; Parameters: filename.</li><li><code>add_information()</code> &ndash; No inline documentation available.</li><li><code>factions_view()</code> &ndash; No inline documentation available.</li><li><code>faction_graph()</code> &ndash; No inline documentation available.</li><li><code>add_clue()</code> &ndash; No inline documentation available.</li><li><code>edit_clue(idx)</code> &ndash; Parameters: idx.</li></ul><div class='class'><h4>class User (UserMixin, db.Model)</h4><p></p><ul></ul></div><div class='class'><h4>class JournalEntry (db.Model)</h4><p></p><ul></ul></div></section>
<section class='module'><h3>modules\web\test_server.py</h3><p></p><h4>Functions</h4><ul><li><code>hello()</code> &ndash; No inline documentation available.</li></ul></section></section>
</body>
</html>
